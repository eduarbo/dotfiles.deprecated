{
    "title": "Fn Layer (@eduarbo)",
    "rules": [{
        <%
            mandatory_modifiers = ["right_shift", "left_shift"];
            optional_modifiers = [];
        %>
        "description": "Function keys, movement, brightness, volumen and media conntrols",
        "manipulators": [
            <%# -------------------------------------------------- %>
            <%# Volume controls %>
            <%# -------------------------------------------------- %>
            {
                "type": "basic",
                "from": <%= from("q", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["mute"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("w", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["volume_decrement"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("r", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["volume_increment"]]) %>
            },

            <%# -------------------------------------------------- %>
            <%# Brightness controls %>
            <%# -------------------------------------------------- %>
            {
                "type": "basic",
                "from": <%= from("a", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["display_brightness_decrement"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("g", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["display_brightness_increment"]]) %>
            },

            <%# -------------------------------------------------- %>
            <%# Music %>
            <%# -------------------------------------------------- %>
            {
                "type": "basic",
                "from": <%= from("x", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["rewind"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("c", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["play_or_pause"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("v", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["fastforward"]]) %>
            },

            <%# -------------------------------------------------- %>
            <%# Movement %>
            <%# -------------------------------------------------- %>
            {
                "type": "basic",
                "from": <%= from("e", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["up_arrow"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("s", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["left_arrow"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("d", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["down_arrow"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("f", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["right_arrow"]]) %>
            },

            {
                "type": "basic",
                "from": <%= from("k", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["up_arrow"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("h", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["left_arrow"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("j", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["down_arrow"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("l", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["right_arrow"]]) %>
            },

            {
                "type": "basic",
                "from": <%= from("i", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["page_up"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("u", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["page_down"]]) %>
            },

            <%# FIXME This is not working %>
            {
                "type": "basic",
                "from": <%= from("comma", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["home"]]) %>
            },
            {
                "type": "basic",
                "from": <%= from("m", mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["end"]]) %>
            }

        <% if false %>
            <%# TODO Move function keys to another layer %>

            <%# -------------------------------------------------- %>
            <%# Function keys %>
            <%# -------------------------------------------------- %>
            <%
                remap_function_keys = [
                    'y', 'u', 'i', 'o',
                    'h', 'j', 'k', 'l',
                    'n', 'm', 'comma', 'period'
                ];
            %>

            <% remap_function_keys.each.with_index(1) do |char, index| %>
            {
                "type": "basic",
                "from": <%= from(char, mandatory_modifiers, optional_modifiers) %>,
                "to": <%= to([["f#{index}", ["fn"]]]) %>
            },
            <% end %>
        <% end %>
        ]
    }]
}
