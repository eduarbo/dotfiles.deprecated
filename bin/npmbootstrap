#!/usr/bin/env bash

# List of npm packages
node_packages="avn avn-nvm bower gulp gulp-util gulp-sass ember-cli prettyjson less express jade jade-lint wintersmith jitsu complete jsonlint vimlint livedown"

source ~/.dotfiles/lib/utils

# Check for npm
if ! type_exists 'npm'; then
  echo
  e_error "Error: npm not found."

  if ! type_exists 'brew'; then
    e_error "You should install first Homebrew in order to install NPM"
    exit
  else
    echo "Installing npm"
    brew install nvm
    source ~/.nvm/nvm.sh
    nvm install stable
    nvm use stable
    nvm alias default stable
  fi
fi

if type_exists 'npm'; then
  e_header "Installing Node.js packages..."

  # Install packages globally and quietly
  npm install $node_packages --global --quiet

  [[ $? ]] && e_success "Done"
fi
